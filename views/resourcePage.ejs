<!DOCTYPE html>
<html lang="en">

<head>
  <title>Resource</title>

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
  <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
  <link rel="stylesheet" href="/styles/main.css" type="text/css" />
  <link rel="stylesheet" href="/styles/layout.css" type="text/css" />

  <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>

  <script type="text/javascript" src="/scripts/resourcePage.js"></script>
  <script type="text/javascript" src="/scripts/loginbutton.js"></script>
  <script
      src="https://kit.fontawesome.com/17f5e217cf.js"
      crossorigin="anonymous"
    ></script>
</head>



<body>
  <%- include('partials/_header') %>
    <main>
      <div class="container flex justify-center">
        <h1 class="text-5xl text-bold underline my-3">
          <%= data[0]['title'] %>
        </h1>
      </div>
      <section class="container flex justify-around flex-wrap my-4">
        <div class="edit_resource_container">
          <span class="average_rating">
            <h6>Average rating: <%= average %> stars</h6>
          </span>
          <div class="resourceInfo">
            <div class="border-solid rounded-sm border-black border-2">
              <h4 class="resource_item_title mx-1 underline">Description</h4>
              <p class="resource_item_description mx-1">
                <%= data[0]['description'] %>
              </p>
              <h4 class="resource_item_title mx-1 underline">URL</h4>
              <a href="<%= data[0]['url'] %>" class="resource_item_url mx-1">
                <%= data[0]['url'] %>
              </a>
              <h6 class="resource_item_subtitle mx-1 underline">Created at </h6>
              <p class="resource_item_creator mx-1">
                <%function parseDate(input) {
                  let date = Date.parse(input);
                  date = new Date(date);
                  return date.toLocaleString("en-US");
                }%>
                <%= parseDate(data[0]['created_at']) %>
              </p>
              </br>
            </div>
          </div>
          </br>

          <div class="container flex justify-around">

            <div class="like_button_wrapper">
              <button type="button" id="like_button"
                class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900">
                Like</button>
            </div>

            <div class="dislike_button_wrapper">
              <button type="button" id="dislike_button"
                class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900">
                Dislike</button>
            </div>



            <% if (Number(user)===data[0]['creator_id']) {%>
              <div class="edit_button_wrapper">
                <button type="button" id="edit_button"
                  class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900">
                  EDIT</button>
              </div>
              <div class="delete_button_wrapper">
                <button type="button" id="delete_button"
                  class="text-red-700 hover:text-white border border-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600 dark:focus:ring-red-900">
                  DELETE</button>
              </div>
              <%}%>

          </div>
          </br>

          <form id="review_form" method="post">
            <div class="review-title-wrapper">
              <h2 class="review_title">Leave a review</h2>
            </div>
            <div class="rate inline-flex justify-between my-3 w-full">
              <div class="inline-flex flex-col flex-wrap justify-center">
                <input type="radio" class="ratings_stars block place-self-center" id="star5" name="rate" value="5" />
                <label for="star5" title="text" class="block mx-2">5 stars</label>
              </div>
              <div class="inline-flex flex-col flex-wrap justify-center">
                <input type="radio" class="ratings_stars block place-self-center" id="star4" name="rate" value="4" />
                <label for="star4" title="text" class="block mx-2">4 stars</label>
              </div>
              <div class="inline-flex flex-col flex-wrap justify-center">
                <input type="radio" class="ratings_stars block place-self-center" id="star3" name="rate" value="3" />
                <label for="star3" title="text" class="block mx-2">3 stars</label>
              </div>
              <div class="inline-flex flex-col flex-wrap justify-center">
                <input type="radio" class="ratings_stars block place-self-center" id="star2" name="rate" value="2" />
                <label for="star2" title="text" class="block mx-2">2 stars</label>
              </div>
              <div class="inline-flex flex-col flex-wrap justify-center">
                <input type="radio" class="ratings_stars block place-self-center" id="star1" name="rate" value="1" />
                <label for="star1" title="text" class="block mx-2">1 star</label>
              </div>
            </div>
            <div class="comment_wrapper">
              </br>
              <div class="comment_box_wrapper flex justify-around">
                <textarea type="text" name="comment" class="commentBoxInput border-2 border-solid rounded border-black"
                  placeholder="comment"></textarea>
                <button type="submit"
                  class="submit_comment_button bg-brown hover:bg-dark-red font-bold py-2 px-4 mr-2 border-b-4 border-r-4 text-cream border-dark-cream hover:border-reg-red rounded active:border-0">submit</button>
              </div>
              <div class="commentValidation flex justify-center">
                <h3 class="text-l text-red-500">Please leave a rating!</h3>
              </div>
          </form>


        </div>
        </div>

      </section>

      <section id="comments">
        <h2 class="comment-title">Comments</h2>
        <% if (data[0].comment) {%>
          <% for (let i=data.length - 1; i>= 0; i--) { %>
            <div class="comment_container">
              <p class="comment_text"><%= data[i].comment %> --  <strong><%= data[i].rating %> stars</strong> </p>
                  </br>
                  <p class="comment_footer"><strong>left by: </strong><%= data[i].name %> <strong>on </strong><%= parseDate(data[i].created_at) %>
                  </p>
            </div>
            </br>
            <% } %>
              <% } %>
      </section>



    </main>
</body>




</html>
